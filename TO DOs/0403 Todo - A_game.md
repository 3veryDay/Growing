
## ✅ 전체 플로우 요약

1. **음악 선택 UI 노출**
2. **사용자가 음악 유형 선택 + 입력**
3. **Spotify API 요청 → 결과 리스트 반환**
4. **리스트 중 음악 선택**
5. **음악 재생 (Spotify Web Playback SDK)**
6. **재생 상태 UI 업데이트 (재생 중, 일시정지, 트랙 정보 등)**

---

## 🗓️ 상세 개발 타임라인

### 🔹 1. 음악 선택 UI 설계 및 구현 (프론트)
- **1-1**: 인터벌 설정 이후 or 별도 페이지에서 "음악 선택" 섹션 추가
- **1-2**: 아래와 같은 음악 유형 선택 드롭다운 or 버튼 구성
  - Random
  - Recommended (Spotify 계정 기반 추천)
  - Artist 입력
  - Keyword (노래 제목 또는 앨범 키워드)
- **1-3**: Artist / Keyword 유형일 경우 인풋 필드 동적 노출

> 이 UI는 `PlayerPage`, `MusicSetupPage` 등 별도 컴포넌트로 구성 가능

---

### 🔹 2. 사용자 입력 처리 & Spotify API 요청 (프론트 + 백엔드)
- **2-1**: 사용자가 유형 및 입력값 선택 → API 호출 트리거
- **2-2**: 백엔드에 사용자 Access Token 포함 요청 전송
- **2-3**: 백엔드에서 Spotify API로 검색 or 추천 트랙 요청
  - `GET /v1/recommendations`
  - `GET /v1/search` (type=track or artist)
- **2-4**: 결과를 프론트에 응답

---

### 🔹 3. 검색 결과 리스트 보여주기 (프론트)
- **3-1**: 카드 형태로 트랙 이미지 + 제목 + 아티스트 표시
- **3-2**: `Select` 또는 `Play` 버튼 제공

---

### 🔹 4. 음악 선택 → 재생 시작 (프론트 + Spotify SDK)
- **4-1**: 선택한 트랙 ID로 Spotify Web Playback SDK에 전송
- **4-2**: SDK 초기화 및 연결 확인
  - 사용자 디바이스 등록 → `player_id` 가져오기
  - `PUT /v1/me/player/play` 요청 (디바이스 ID 포함)
- **4-3**: 음악 재생 시작

---

### 🔹 5. 재생 상태 모니터링 및 UI 업데이트 (프론트)
- **5-1**: 현재 재생 중 트랙 정보 표시
  - 제목, 아티스트, 앨범 아트, 현재 진행 시간
- **5-2**: 일시정지, 다음 트랙, 이전 트랙 제어 버튼
- **5-3**: Spotify SDK의 `player.addListener()`로 상태 추적

---

### 🔹 6. 예외 처리 및 UI 가드
- **6-1**: 비프리미엄 사용자 안내 (Spotify Premium 전용 기능)
- **6-2**: 검색 결과 없을 경우 예외 처리
- **6-3**: 재생 디바이스 없을 경우 설정 안내

---

## 🧩 필요한 기술 구성요소 요약

| 구성요소 | 역할 |
|--------|------|
| **Spotify API** | 트랙 검색, 추천, 재생 제어 |
| **Spotify Web Playback SDK** | 실제 음악 재생 |
| **프론트 (React)** | 사용자 입력, 음악 선택 UI, 재생 제어 UI |
| **백엔드 (Spring Boot)** | Spotify API 요청 대리, Access Token 관리 |
| **Redux or Context (선택)** | 현재 재생 상태, 트랙 정보 관리 |

---

## ✨ 보너스 기능 아이디어

- 🎵 인터벌 구간마다 자동 트랙 변경
- 🎚️ 재생속도/볼륨 조절 UI
- 📀 테마별 플레이리스트 (e.g. Chill, Hype, Focus)
- 🧠 사용자의 운동기록 기반 추천 음악
