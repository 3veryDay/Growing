## Q002. S3

**📄 문제**  
회사는 독점 애플리케이션의 로그 파일을 분석할 수 있는 능력이 필요합니다. 로그는 Amazon S3 버킷에 JSON 형식으로 저장됩니다. 쿼리는 간단하고 주문형으로 실행됩니다. 솔루션 설계자는 기존 아키텍처에 대한 최소한의 변경으로 분석을 수행해야 합니다. 
솔루션 설계자는 최소한의 운영 오버헤드로 이러한 요구 사항을 충족하기 위해 무엇을 해야 합니까?

**📝 선택지**
- A. Amazon Redshift 를 사용하여 모든 콘텐츠를 한 곳에 로드하고 필요에 따라 SQL 쿼리를 실행합니다. 
- B. Amazon CloudWatch Logs 를 사용하여 로그를 저장합니다. Amazon CloudWatch 콘솔에서 필요에 따라 SQL 쿼리를 실행합니다. 
- C. Amazon S3와 함께 Amazon Athena를 직접 사용하여 필요에 따라 쿼리를 실행합니다
- D. AWS Glue 를 사용하여 로그를 분류합니다. Amazon EMR 에서 임시 Apache Spark 클러스터를 사용하여 필요에 따라 SQL 쿼리를 실행합니다. 

**✅ 정답:** C

**📚 해설**
- **왜 맞는지:**  
S3에 쿼리하는 거 Athena. Athena가 사용 가능한 모든 리전에서는 SQL를 통해서 인벤토리 쿼리 가능. JSON 가능.
    - 단순하고 ondemand
    - 아키텍쳐 변경 최소화
    - 운영 오버헤드 줄이는 것이 요구사항 -> Serverless Athena
- **왜 아닌지:**  
  - A: RedShift는 Athena가 있을 때 불필요. Query가 단순할 때는 더욱 더.  
  - B: CloudWatch Logs는 S3에 저장되는 것이 아닌, CloudWatch logs에 저장하는 것임. query machine이고, 실시간 엔진은 아님.  
  - D: GLUE는 ETL. 분석을 담당하지 않음. 

- **서비스 설명:**
  - Athena : **S3 데이터를** 분석하기 위한 서비스. SQL 사용해서 파일에 질의함. JSO< CSV, ORC, Avro 사용 가능. 
     - Quicksight과 함께 씀
     - Business Intelligence, Analytics, reporting, analyze and query VPC flow logs
     - cloudtrail trails.
     - <mark>S3 데이터를 서버리스 SQL을 사용해서 분석할 때 Athena 사용</mark>
  - RedShift : postgreSQL 기반, OLAP으로 사용(online analytical processing).
     - **ONLINE**
     - Athena보다 빠름. 
     - ETL(로딩)
  - GLUE : 완전 관리형 ETL(데이터 추출-변환-적재), 데이터 준비 서비스
     - S3에 있는 로그, CSV, JSON을 카탈로그화 하고, 데이터 변환까지 처리해줌. 

**🔑 키워드 / 태그**
`#S3` `#Query`
